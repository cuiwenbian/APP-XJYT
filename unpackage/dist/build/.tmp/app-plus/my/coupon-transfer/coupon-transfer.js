(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["my/coupon-transfer/coupon-transfer"],{"047f":function(n,t,e){"use strict";e.r(t);var s=e("2d07"),o=e("ae38");for(var u in o)"default"!==u&&function(n){e.d(t,n,function(){return o[n]})}(u);e("de05");var r,a=e("f0c5"),i=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);t["default"]=i.exports},"128a":function(n,t,e){"use strict";(function(n){e("c860"),e("921b");s(e("66fd"));var t=s(e("047f"));function s(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("6e42")["createPage"])},"2d07":function(n,t,e){"use strict";var s,o=function(){var n=this,t=n.$createElement;n._self._c},u=[];e.d(t,"b",function(){return o}),e.d(t,"c",function(){return u}),e.d(t,"a",function(){return s})},aa92:function(n,t,e){},ae38:function(n,t,e){"use strict";e.r(t);var s=e("face"),o=e.n(s);for(var u in s)"default"!==u&&function(n){e.d(t,n,function(){return s[n]})}(u);t["default"]=o.a},de05:function(n,t,e){"use strict";var s=e("aa92"),o=e.n(s);o.a},face:function(n,t,e){"use strict";(function(n,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){return Promise.all([e.e("common/vendor"),e.e("components/keyboard-package/keyboard-package")]).then(e.bind(null,"2e84"))},u=function(){return Promise.all([e.e("common/vendor"),e.e("components/password-input/password-input")]).then(e.bind(null,"2d9e"))},r={data:function(){return{nums:"3",n:!0,phone:"",transferNums:"",password:"",passIn:!1,numberList:[],length:6,type:""}},onLoad:function(t){this.type=t.t,console.log(n(this.type," at my\\coupon-transfer\\coupon-transfer.vue:46"))},components:{keyboardPackage:o,passwordInput:u},methods:{getPhone:function(n){this.phone=n.detail.value},getTransferNums:function(n){this.transferNums=n.detail.value},all:function(){this.transferNums=this.nums},step:function(){if(""==this.phone)return s.showToast({icon:"none",title:"请输入手机号"}),!1;var n=/^(16[0-9]|14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9]|19[0-9])\d{8}$$/;return n.test(this.phone)?""==this.transferNums?(s.showToast({icon:"none",title:"请输入转让数量"}),!1):(this.passIn=!0,this.$refs["number"].open(),this.onInput(val),void s.navigateTo({url:"../coupon-success/coupon-success",success:function(n){},fail:function(){},complete:function(){}})):(s.showToast({title:"请输入正确的手机号",icon:"none",mask:!0,duration:2e3}),!1)},clo:function(){this.passIn=!1,this.$refs["number"].close(),this.numberList.length=0},onDelete:function(){this.numberList.pop()},onChange:function(n){0==n.show&&(this.passIn=!1),this.numberList.length=0},onConfirm:function(){6!=this.numberList.length&&s.showToast({title:"请输入六位交易密码！",duration:2e3,icon:"none"})},onInput:function(t){var e=this;e.numberList.push(t),e.password=e.numberList.join().replace(/,/g,""),e.numberList.length>=e.length&&(s.request({url:this.url+"discounttransfer/",method:"POST",data:{mobile:this.phone,number:this.transferNums,type:this.type,password:this.password},header:{Authorization:"JWT "+this.global_.token},success:function(t){if(console.log(n(t," at my\\coupon-transfer\\coupon-transfer.vue:140")),303==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),s.showToast({title:"用户不存在",icon:"none",duration:2e3})),302==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),s.showToast({title:"不允许转让经销商",icon:"none",duration:2e3})),204==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),s.showToast({title:"用户之间不允许转让",icon:"none",duration:2e3})),305==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),s.showToast({title:"可用优惠券数量不足",icon:"none",duration:2e3})),200==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),s.redirectTo({url:"../coupon-success/coupon-success"})),400==t.statusCode){e.numberList.pop(),e.numberList.length=0,e.$refs.wrong.flag=!1;var o=t.data.data.err_num,u=5-o;e.$refs.wrong.tip="剩余"+u+"次机会"}423==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),s.showToast({title:"交易密码已锁定,请在今日24:00后进行交易",icon:"none",duration:2e3}));var r=getCurrentPages().pop();void 0!=r&&null!=r&&r.onLoad()}}),this.numberList.length=0)},next:function(){this.n=!1},back:function(){this.n=!0}}};t.default=r}).call(this,e("0de9")["default"],e("6e42")["default"])}},[["128a","common/runtime","common/vendor"]]]);