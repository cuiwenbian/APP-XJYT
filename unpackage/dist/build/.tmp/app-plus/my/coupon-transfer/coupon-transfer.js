(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["my/coupon-transfer/coupon-transfer"],{"24da":function(n,t,e){"use strict";(function(n){e("9c0b"),e("921b");s(e("66fd"));var t=s(e("eacb"));function s(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("6e42")["createPage"])},"65d8":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){return Promise.all([e.e("common/vendor"),e.e("components/keyboard-package/keyboard-package")]).then(e.bind(null,"bd7f"))},o=function(){return Promise.all([e.e("common/vendor"),e.e("components/password-input/password-input")]).then(e.bind(null,"d391"))},u={data:function(){return{nums:"3",n:!0,phone:"",transferNums:"",password:"",passIn:!1,numberList:[],length:6,type:""}},onLoad:function(n){this.type=n.t},components:{keyboardPackage:s,passwordInput:o},methods:{getPhone:function(n){this.phone=n.detail.value},getTransferNums:function(n){this.transferNums=n.detail.value},all:function(){this.transferNums=this.nums},step:function(){if(""==this.phone)return n.showToast({icon:"none",title:"请输入手机号"}),!1;var t=/^(16[0-9]|14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9]|19[0-9])\d{8}$$/;return t.test(this.phone)?""==this.transferNums?(n.showToast({icon:"none",title:"请输入转让数量"}),!1):(this.passIn=!0,this.$refs["number"].open(),this.onInput(val),void n.navigateTo({url:"../coupon-success/coupon-success"})):(n.showToast({title:"请输入正确的手机号",icon:"none",mask:!0,duration:2e3}),!1)},clo:function(){this.passIn=!1,this.$refs["number"].close(),this.numberList.length=0},onDelete:function(){this.numberList.pop()},onChange:function(n){0==n.show&&(this.passIn=!1),this.numberList.length=0},onConfirm:function(){6!=this.numberList.length&&n.showToast({title:"请输入六位交易密码！",duration:2e3,icon:"none"})},onInput:function(t){var e=this;e.numberList.push(t),e.password=e.numberList.join().replace(/,/g,""),e.numberList.length>=e.length&&(n.request({url:this.url+"discounttransfer/",method:"POST",data:{mobile:this.phone,number:this.transferNums,type:this.type,password:this.password},header:{Authorization:"JWT "+this.global_.token},success:function(t){if(303==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),n.showToast({title:"用户不存在",icon:"none",duration:2e3})),302==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),n.showToast({title:"不允许转让经销商",icon:"none",duration:2e3})),204==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),n.showToast({title:"用户之间不允许转让",icon:"none",duration:2e3})),305==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),n.showToast({title:"可用优惠券数量不足",icon:"none",duration:2e3})),200==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),n.redirectTo({url:"../coupon-success/coupon-success"})),400==t.statusCode){e.numberList.pop(),e.numberList.length=0,e.$refs.wrong.flag=!1;var s=t.data.data.err_num,o=5-s;e.$refs.wrong.tip="剩余"+o+"次机会"}423==t.statusCode&&(e.passIn=!1,e.$refs["number"].close(),n.showToast({title:"交易密码已锁定,请在今日24:00后进行交易",icon:"none",duration:2e3}));var u=getCurrentPages().pop();void 0!=u&&null!=u&&u.onLoad()}}),this.numberList.length=0)},next:function(){this.n=!1},back:function(){this.n=!0}}};t.default=u}).call(this,e("6e42")["default"])},a498:function(n,t,e){"use strict";var s=e("c440"),o=e.n(s);o.a},a65f:function(n,t,e){"use strict";var s,o=function(){var n=this,t=n.$createElement;n._self._c},u=[];e.d(t,"b",function(){return o}),e.d(t,"c",function(){return u}),e.d(t,"a",function(){return s})},c440:function(n,t,e){},eacb:function(n,t,e){"use strict";e.r(t);var s=e("a65f"),o=e("edec");for(var u in o)"default"!==u&&function(n){e.d(t,n,function(){return o[n]})}(u);e("a498");var r,a=e("f0c5"),i=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);t["default"]=i.exports},edec:function(n,t,e){"use strict";e.r(t);var s=e("65d8"),o=e.n(s);for(var u in s)"default"!==u&&function(n){e.d(t,n,function(){return s[n]})}(u);t["default"]=o.a}},[["24da","common/runtime","common/vendor"]]]);