(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{1900:function(t,e,n){},2273:function(t,e,n){"use strict";n.r(e);var o=n("4c90"),s=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=s.a},"461e":function(t,e,n){"use strict";var o,s=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o})},"4c90":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return n.e("components/keyboard-package/keyboard-package").then(n.bind(null,"bd7f"))},s=function(){return n.e("components/password-input/password-input").then(n.bind(null,"d391"))},a={data:function(){return{tabCurrentIndex:0,data_loading:!0,navList:[{state:"[101,102,103,104,105]",text:"全部"},{state:"[101]",text:"待付款"},{state:"[102]",text:"待确认"},{state:"[104,105]",text:"历史订单"}],orderList:[],buy:"所属矿池",state:"待付款",price:"购买单价",numbr:"购买数量",pay:"支付金额",trading:"交易类型",dater:"下单日期",shod:!0,numberList:[],length:6,type:"number",passIn:!1,delShow:!1,titl:!1,password:"",num:"",num1:"",num2:"",phone:""}},components:{keyboardPackage:o,passwordInput:s},onShow:function(){this.orderSource()},onLoad:function(){this.orderSource()},methods:{moveHandle:function(t){t.preventDefault(),t.stopPropagation()},shensu:function(){this.titl=!1},orderSource:function(){var e=this,n=this.navList[this.tabCurrentIndex].state;e.data_loading=!0,t.showLoading({title:"加载中..."}),t.request({url:this.url+"orderall/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{orderstatus:n},success:function(n){console.log(n);var o=(n.data.data||[]).map(function(t){switch(t.type){case 9:t.type_text="矿机买入",t.type_text_color="#FFB931";break;case 10:t.type_text="矿机卖出",t.type_text_color="#FF3131";break;case 11:t.type_text="矿力买入",t.type_text_color="#3D97D6";break;case 12:t.type_text="矿力转让",t.type_text_color="#7466FF";break;default:t.type_text="",t.type_text_color="#888";break}switch(t.status){case 101:t.state_text="待付款";break;case 102:t.state_text="待确认";break;case 103:t.state_text="待确认";break;case 104:t.state_text="已完成";break;case 105:t.state_text="已取消";break;default:t.state_text="-";break}return t});console.log(o),e.orderList=o.reverse(),t.hideLoading(),e.data_loading=!1},fail:function(){t.hideLoading(),e.data_loading=!1}})},handleToDetail:function(e){101==e.status&&"矿机买入"==e.type_text&&t.request({url:this.url+"salemessage/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){console.log(e);var n=JSON.stringify(e.data.data);console.log(n),t.navigateTo({url:"../../mill/staypay/staypay?mvvp="+n})}}),101==e.status&&"矿机卖出"==e.type_text&&t.request({url:this.url+"salemessage/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){console.log(e);var n=JSON.stringify(e.data.data);console.log(n),t.navigateTo({url:"../../mill/machine-sale/machine-sale?mvvp="+n})}}),102==e.status&&"矿机卖出"==e.type_text&&t.request({url:this.url+"salemessage/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){var n=JSON.stringify(e.data.data);t.navigateTo({url:"../../mill/salepay/salepay?aser="+n})}}),102==e.status&&"矿机买入"==e.type_text&&t.request({url:this.url+"salemessage/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){var n=JSON.stringify(e.data.data);t.navigateTo({url:"../../mill/sale-out/sale-out?aser="+n})}}),"矿机卖出"==e.type_text&&104==e.status&&t.request({url:this.url+"salemessage/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){var n=JSON.stringify(e.data.data);t.navigateTo({url:"../../mill/completed/completed?deattr="+n})}}),"矿机买入"==e.type_text&&104==e.status&&t.request({url:this.url+"salemessage/",method:"GET",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){var n=JSON.stringify(e.data.data);console.log(n),t.navigateTo({url:"../../mill/salecompleted/salecompleted?cshug="+n})}})},onBackPress:function(t){plus.key.hideSoftKeybord()},clo:function(){this.passIn=!1,this.$refs["number"].close(),this.numberList.length=0},cloo:function(){this.delShow=!1,this.$refs["numbers"].close(),this.numberList.length=0},onDelete:function(){this.numberList.pop()},onChange1:function(t){0==t.show&&(this.delShow=!1),this.numberList.length=0},onChange:function(t){0==t.show&&(this.passIn=!1),this.numberList.length=0},onConfirm:function(){6!=this.numberList.length&&t.showToast({title:"请输入六位交易密码！",duration:2e3,icon:"none"})},handleOrderPay:function(t){var e=this;console.log(t.ordernum),e.num=t.ordernum,e.passIn=!0,e.$refs["number"].open(),e.onInput(val)},onInput:function(e){var n=this;n.numberList.push(e),n.password=n.numberList.join().replace(/,/g,""),n.numberList.length>=n.length&&(t.request({url:n.url+"buyaffirm/",method:"POST",data:{order_num:n.num,password:n.password},header:{Authorization:"JWT "+n.global_.token},success:function(e){if(console.log(e),400==e.statusCode){n.numberList.pop(),n.numberList.length=0,n.$refs.wrong.flag=!1;var o=e.data.data.err_num,s=5-o;n.$refs.wrong.tip="剩余"+s+"次机会"}401==e.statusCode&&(console.log("未设置资金密码"),n.passIn=!1,n.$refs["number"].close(),t.showModal({title:"提示",content:"未设置资金密码",showCancel:!1,cancelText:"",confirmText:"确定",success:function(t){},fail:function(){},complete:function(){}})),423==e.statusCode&&(n.passIn=!1,n.$refs["number"].close(),t.showToast({title:"交易密码已锁定,请在今日24:00后进行交易",icon:"none",duration:2e3})),201==e.statusCode&&(n.success=!0),200==e.statusCode&&(n.passIn=!1,n.$refs["number"].close(),t.showToast({title:"付款完成",duration:3e3}));var a=getCurrentPages().pop();void 0!=a&&null!=a&&a.onLoad()}}),this.numberList.length=0)},handleOrderCancel:function(e){var n=this;t.request({url:this.url+"ordercancel/",method:"POST",header:{Authorization:"JWT "+this.global_.token},data:{order_num:e.ordernum},success:function(e){200==e.statusCode?t.showToast({title:"取消成功",icon:"none",duration:2e3}):400==e.statusCode&&t.showToast({title:"该订单不可删除",icon:"none",duration:2e3}),n.orderSource()}})},onInput1:function(e){var n=this;console.log(n.num1),n.numberList.push(e),n.password=n.numberList.join().replace(/,/g,""),n.numberList.length>=n.length&&(t.request({url:n.url+"saleaffirm/",method:"POST",data:{order_num:n.num1,password:n.password},header:{Authorization:"JWT "+this.global_.token},success:function(e){if(400==e.statusCode){n.numberList.pop(),n.numberList.length=0,n.$refs.wrong.flag=!1;var o=e.data.data.err_num,s=5-o;n.$refs.wrong.tip="剩余"+s+"次机会"}423==e.statusCode&&(n.delShow=!1,n.$refs["numbers"].close(),t.showToast({title:"交易密码已锁定,请在今日24:00后进行交易",icon:"none",duration:2e3})),201==e.statusCode&&(n.success=!0),200==e.statusCode&&(n.delShow=!1,n.$refs["numbers"].close(),t.showToast({title:"收款完成",duration:2e3}));var a=getCurrentPages().pop();void 0!=a&&null!=a&&a.onLoad(n.val)}}),this.numberList.length=0)},handleOrderConfirm:function(t){this.num1=t.ordernum,console.log(this.num1),this.delShow=!0,this.$refs["numbers"].open(),this.onInput1(val)},changeTab:function(t){this.tabCurrentIndex=t.target.current},tabClick:function(t){var e=this;e.tabCurrentIndex=t,e.orderList=[],this.orderSource()},getPhoneValue:function(t){this.phone=t.detail.value,console.log(this.phone)},handleOrderAppeal:function(t){this.num2=t.ordernum,console.log(t.ordernum),this.titl=!0,this.arr=[]},deer:function(){var e=this;if(""==e.phone)return t.showToast({title:"填写内容不能为空",icon:"none"}),!1;t.request({url:this.url+"orderappeal/",method:"POST",header:{Authorization:"JWT "+this.global_.token},data:{info:e.phone,order_num:e.num2},success:function(n){console.log(e.phone),200==n.statusCode?(e.titl=!1,t.showToast({title:"已提交"})):400==n.statusCode&&(t.showToast({title:"该订单不可申诉",icon:"none"}),e.titl=!1)}})}}};e.default=a}).call(this,n("543d")["default"])},"6bb2":function(t,e,n){"use strict";n.r(e);var o=n("461e"),s=n("2273");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("e2b6");var r,u=n("f0c5"),i=Object(u["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=i.exports},"9f41":function(t,e,n){"use strict";(function(t){n("9c0b"),n("921b");o(n("66fd"));var e=o(n("6bb2"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e2b6:function(t,e,n){"use strict";var o=n("1900"),s=n.n(o);s.a}},[["9f41","common/runtime","common/vendor"]]]);